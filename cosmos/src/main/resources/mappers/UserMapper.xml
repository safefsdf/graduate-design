<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jiuqi.cosmos.dao.UserDao">
   <resultMap id="BaseResultMap" type="com.jiuqi.cosmos.entity.UInfo">
    <id column="user_id" jdbcType="INTEGER" property="userId" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="password" jdbcType="VARCHAR" property="password" />
    <result column="answer" jdbcType="VARCHAR" property="answer" />
    <result column="nickname" jdbcType="VARCHAR" property="nickname" />
    <result column="address" jdbcType="VARCHAR" property="address" />
    <result column="headimg" jdbcType="VARCHAR" property="headimg" />
    <result column="coverimg" jdbcType="VARCHAR" property="coverimg" />
    <result column="createtime" jdbcType="TIMESTAMP" property="createtime" />
    <result column="sex" jdbcType="CHAR" property="sex" />
    <result column="focus_count" jdbcType="INTEGER" property="focusCount" />
    <result column="signature" jdbcType="LONGVARCHAR" property="signature" />
  </resultMap>
  
	<!-- <insert id="createUser" parameterType="com.jiuqi.cosmos.entity.User">
	有默认值的需要存入对应的默认值：昵称，个性签名，头像，封面
		insert into tb_user
		values(null,#{phone},#{password},#{answer},'随风飘摇', '人生不是在吃就是在去吃的路上', null,null,now(),null,null,0)
	</insert> -->
	 <insert id="createUser" parameterType="com.jiuqi.cosmos.entity.User">
    insert into tb_user (user_id, phone, password, 
      answer, nickname, address, 
      headimg, coverimg, createtime, 
      sex, focus_count, signature
      )
    values (#{userId,jdbcType=INTEGER}, #{phone,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, 
      #{answer,jdbcType=VARCHAR}, #{nickname,jdbcType=VARCHAR}, #{address,jdbcType=VARCHAR}, 
      #{headimg,jdbcType=VARCHAR}, #{coverimg,jdbcType=VARCHAR}, #{createtime,jdbcType=TIMESTAMP}, 
      #{sex,jdbcType=CHAR}, #{focusCount,jdbcType=INTEGER}, #{signature,jdbcType=LONGVARCHAR}
      )
  </insert>
   <update id="updateByPrimaryKey" parameterType="com.jiuqi.cosmos.entity.User">
    update tb_user
    set phone = #{phone,jdbcType=VARCHAR},
      password = #{password,jdbcType=VARCHAR},
      answer = #{answer,jdbcType=VARCHAR},
      nickname = #{nickname,jdbcType=VARCHAR},
      address = #{address,jdbcType=VARCHAR},
      headimg = #{headimg,jdbcType=VARCHAR},
      coverimg = #{coverimg,jdbcType=VARCHAR},
      createtime = #{createtime,jdbcType=TIMESTAMP},
      sex = #{sex,jdbcType=CHAR},
      focus_count = #{focusCount,jdbcType=INTEGER},
      signature = #{signature,jdbcType=LONGVARCHAR}
    where user_id = #{userId,jdbcType=INTEGER}
  </update>
	<update id="updateFocusCount">
		update tb_user set focusCount = #{focusCount} where user_id = #{userId}
	</update>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from tb_user
    where user_id = #{userId,jdbcType=INTEGER}
  </delete>
	<!-- 根据id只查询相应的数据 -->
	<select id="getByPhone" resultType="User">
		select * from tb_user where phone=#{phone}
	</select>
	<select id="quaryByPhoneAndPassword" resultType="User">
		select * from tb_user where phone = #{phone} and password = #{password}
	</select>
	<select id="getAll" resultType="User">
		select * from tb_user
	</select>
		<!-- 根据id只查询相应的数据 -->
	<select id="getById" resultType="User" parameterType="Integer">
		select * from tb_user where user_id=#{userId}
	</select>
</mapper>